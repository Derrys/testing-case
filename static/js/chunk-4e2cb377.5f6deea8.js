(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e2cb377"],{"022c":function(e,t,a){},"07e3f":function(e,t,a){"use strict";a("b0a6")},1154:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isCaseDetail?a("router-view",{key:e.$route.path}):a("el-container",[a("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索内容..."},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-main",[a("project-card",{on:{handlerAdd:function(t){return e.addProject()},handlerSelect:e.selectProject,handlerOperate:e.operate}}),a("el-card",{staticClass:"module-card"},[a("div",{staticClass:"module-header",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("模块详情")]),a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-box"},nativeOn:{click:function(t){return e.saveList(t)}}},[e._v("保存")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"dragTable",staticStyle:{width:"100%"},attrs:{data:e.list,"row-key":"id",fit:""}},[a("el-table-column",{attrs:{label:"序号",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(e._s(s.id))])]}}])}),a("el-table-column",{attrs:{"min-width":"250px",label:"模块名"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[s.edit?[a("el-input",{staticClass:"edit-input",model:{value:s.moduleName,callback:function(t){e.$set(s,"moduleName",t)},expression:"row.moduleName"}},[a("el-button",{attrs:{slot:"prepend",icon:"el-icon-close"},on:{click:function(t){return e.cancelEditName(s)}},slot:"prepend"}),a("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-check"},on:{click:function(e){s.edit=!1}},slot:"append"})],1)]:a("span",{staticStyle:{cursor:"pointer"},attrs:{title:s.moduleName},on:{click:function(t){return e.toEditName(s)}}},[e._v(e._s(s.moduleName))])]}}])}),a("el-table-column",{attrs:{"min-width":"200px",label:"作者"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(e._s(s.author))])]}}])}),a("el-table-column",{attrs:{"min-width":"200px",label:"上次执行人"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(e._s(s.lastName))])]}}])}),a("el-table-column",{attrs:{"min-width":"140",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(e._s(e._f("parseTime")(s.createdTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),a("el-table-column",{attrs:{"min-width":"140",label:"执行时间"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("span",[e._v(e._s(e._f("parseTime")(s.latestTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),a("el-table-column",{attrs:{width:"100",label:"模块状态"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-tag",{attrs:{type:e._f("statusFilter")(s.status)}},[e._v(" "+e._s(e._f("statusTransferFilter")(s.status))+" ")])]}}])}),a("el-table-column",{attrs:{width:"70",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("el-switch",{model:{value:s.isOpen,callback:function(t){e.$set(s,"isOpen",t)},expression:"row.isOpen"}})]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:e.caseItemModel.id?"编辑项目":"创建项目",visible:e.caseItemModalVisible},on:{"update:visible":function(t){e.caseItemModalVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.caseItemModel,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"照片",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1}},[e.caseItemModel.img?a("img",{staticClass:"avatar",attrs:{src:e.caseItemModel.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"标题",prop:"name"}},[a("el-input",{model:{value:e.caseItemModel.name,callback:function(t){e.$set(e.caseItemModel,"name",t)},expression:"caseItemModel.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("el-input",{model:{value:e.caseItemModel.description,callback:function(t){e.$set(e.caseItemModel,"description",t)},expression:"caseItemModel.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.caseItemModalVisible=!1}}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.caseItemModel.id?e.updateData():e.createData()}}},[e._v(" 确定 ")])],1)],1)],1)},i=[],l=a("53fe"),n=a.n(l),r=a("a6fe"),o={name:"Case",components:{ProjectCard:r["a"]},filters:{statusFilter(e){const t={success:"success",notStart:"warning",failed:"danger"};return t[e]},statusTransferFilter(e){const t={success:"通过",notStart:"未运行",failed:"失败"};return t[e]}},data(){return{isCaseDetail:"/case/index"!==this.$route.path,searchKey:"",list:[],total:null,listLoading:!0,listQuery:{page:1,limit:10},sortable:null,caseItemModalVisible:!1,caseItemModel:{},rules:{img:[{required:!0,message:"请上传照片!",trigger:"change"}],name:[{required:!0,message:"标题是必填项!",trigger:"blur"}],description:[{required:!0,message:"描述是必填项!",trigger:"blur"}]}}},created(){this.isCaseDetail||setTimeout(()=>{this.list=[{id:1,moduleName:"dhj12",author:"dhj12",lastName:"点点是个小可爱！",createdTime:1612963806,latestTime:1612963231,status:"success",isOpen:!0,edit:!1},{id:2,moduleName:"dhj12",author:"dhj12",lastName:"圈圈是个小可爱！",createdTime:1612963806,latestTime:1612963231,status:"notStart",isOpen:!1,edit:!1},{id:3,moduleName:"dhj12",author:"dhj12",lastName:"大家都是个小可爱！",createdTime:1612963806,latestTime:1612963231,status:"failed",isOpen:!1,edit:!1}],this.listLoading=!1,this.setSort()},1e3)},methods:{addProject(){console.log("添加项目"),this.caseItemModel={},this.caseItemModalVisible=!0,this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()})},selectProject(e){console.log("选中项目: ",e)},operate(e){switch(console.log("点击操作: ",e),e.type){case"delete":this.$confirm(`你确定要删除 ${e.item.name} ?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})});break;case"edit":this.caseItemModel={...e.item},this.caseItemModalVisible=!0,this.$nextTick(()=>{this.$refs["dataForm"].clearValidate()});break;case"editDetail":this.$router.push("/case/index/case-detail/"+e.item.id);break;case"run":break;default:break}},toEditName(e){e.originalModuleName=e.moduleName,e.edit=!0},cancelEditName(e){e.moduleName=e.originalModuleName,e.edit=!1},saveList(){alert("保存列表")},createData(){this.$refs["dataForm"].validate(e=>{e&&alert("创建项目")})},updateData(){this.$refs["dataForm"].validate(e=>{e&&alert("更新项目")})},setSort(){const e=this.$refs.dragTable.$el.querySelectorAll(".el-table__body-wrapper > table > tbody")[0];this.sortable=n.a.create(e,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:e=>{const t=this.list.splice(e.oldIndex,1)[0];this.list.splice(e.newIndex,0,t)}})}}},c=o,d=(a("07e3f"),a("2877")),u=Object(d["a"])(c,s,i,!1,null,"2d11d339",null);t["default"]=u.exports},"173d":function(e,t,a){"use strict";a("022c")},"48ee":function(e,t,a){"use strict";a("f62d")},a6fe:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-wrap"},[e.showAdd?a("el-card",{staticClass:"box-card card-add",attrs:{shadow:"hover"},nativeOn:{click:function(t){return e.add()}}},[a("div",{staticClass:"card-add-content"},[a("i",{staticClass:"el-icon-circle-plus-outline"})])]):e._e(),e._l(e.cardList,(function(t){return a("el-card",{key:t.id,class:["box-card",{active:t.active}],attrs:{shadow:t.active?"always":"hover"},nativeOn:{click:function(a){return e.selectCard(a,t)}}},[a("div",{class:["card-status",t.status]}),a("div",{staticClass:"card-header"},[a("img",{attrs:{width:"100px",height:"60px",src:t.img}}),a("div",{staticClass:"header-text"},[a("div",{staticClass:"title",attrs:{title:t.name}},[e._v(e._s(t.name))]),a("span",{attrs:{title:t.description}},[e._v(e._s(t.description))])])]),a("div",{staticClass:"card-content"},[a("span",[e._v("模块数:")]),e._v(" "+e._s(t.moduleNum)+" ")]),a("div",{staticClass:"card-content"},[a("span",[e._v("用例数:")]),e._v(" "+e._s(t.caseNum)+" ")]),a("div",{class:["card-footer",{"card-result-footer":"result"===e.type}]},["result"===e.type?a("div",[a("icon-button",{staticStyle:{"margin-left":"15px"},attrs:{icon:"el-icon-view",tips:"查看详细结果"},nativeOn:{click:function(a){return e.operate("view",t)}}})],1):[a("icon-button",{attrs:{icon:"el-icon-edit",tips:"编辑"},nativeOn:{click:function(a){return e.operate("edit",t)}}}),a("icon-button",{attrs:{icon:"el-icon-delete",tips:"删除"},nativeOn:{click:function(a){return e.operate("delete",t)}}}),a("icon-button",{attrs:{icon:"el-icon-s-promotion",tips:"运行"},nativeOn:{click:function(a){return e.operate("run",t)}}}),a("icon-button",{attrs:{icon:"el-icon-edit-outline",tips:"编辑详细用例"},nativeOn:{click:function(a){return e.operate("editDetail",t)}}})]],2)])}))],2)},i=[],l=a("fbd1"),n={name:"ProjectCard",components:{IconButton:l["a"]},props:{showAdd:{type:Boolean,default:!0},type:{type:String,default:"case"}},data(){return{cardList:[{id:"1",name:"项目一",description:"这是项目一",img:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",moduleNum:7,caseNum:99,status:"success"},{id:"2",name:"项目二",description:"这是项目二",img:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",moduleNum:10,caseNum:26,status:"failed"},{id:"3",name:"项目三,我的名字很长很长...",description:"这是项目三",img:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",moduleNum:5,caseNum:33,status:"notStart"},{id:"4",name:"项目四",description:"这是项目四，我有很长很长很长的文本，阿哈哈哈哈，来换行吧！！！两行以后就缩略咯====---#332",img:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",moduleNum:9,caseNum:14,status:"success"}]}},created(){this.cardList[0].active=!0},methods:{add(){this.$emit("handlerAdd")},selectCard(e,t){-1==e.target.className.indexOf("icon-item")&&(this.cardList.forEach(e=>{e.active=!1}),t.active=!0,this.cardList=[...this.cardList],this.$emit("handlerSelect",t))},operate(e,t){this.$emit("handlerOperate",{type:e,item:t})}}},r=n,o=(a("48ee"),a("2877")),c=Object(o["a"])(r,s,i,!1,null,"3d054920",null);t["a"]=c.exports},b0a6:function(e,t,a){},f62d:function(e,t,a){},fbd1:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.tips?a("el-tooltip",{attrs:{content:e.tips,placement:"top-start"}},[a("i",{class:[e.icon,"icon","icon-"+e.size]})]):a("i",{class:[e.icon,"icon","icon-"+e.size]})},i=[],l={name:"IconButton",props:{icon:{type:String,required:!0},tips:{type:String,default:""},size:{type:String,default:"normal"}},data(){return{}}},n=l,r=(a("173d"),a("2877")),o=Object(r["a"])(n,s,i,!1,null,"08c89f62",null);t["a"]=o.exports}}]);